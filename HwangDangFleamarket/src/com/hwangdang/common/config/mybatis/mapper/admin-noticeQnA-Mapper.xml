<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardQnA">
	
	<sql id="select-basic">
		SELECT  admin_qna_no ,
				admin_qna_title ,
				admin_qna_content ,
				admin_qna_writer ,
				admin_qna_date ,
				admin_qna_hit ,
				admin_qna_published
				
		FROM  admin_qna
	</sql>
	<sql id="slect-basic-column">
					admin_qna_no , 
					admin_qna_title , 
				    admin_qna_content ,
					admin_qna_writer ,
					admin_qna_date ,
					admin_qna_hit ,
					admin_qna_published 
	</sql>
	
	 <!-- 게시판글 전체 조회 -->
	 <resultMap type="adminQnA" id="resultmap-basic-list">
		<id column="admin_qna_no"  property="adminQnaNo"/>
	 	<result column="admin_qna_title"  property="adminQnaTitle" />
	 	<result column="admin_qna_content"  property="adminQnaContent" />
	 	<result column="admin_qna_writer"  property="adminQnaWriter" />
	 	<result column="admin_qna_date"  property="adminQnaDate" />
	 	<result column="admin_qna_hit"  property="adminQnaHit" />
	 	<result column="admin_qna_published"  property="adminQnaPublished" />
	</resultMap> 
	
	 <!-- 게시판의 글수 조회 -->
	<select id="select-list-count" resultType="int">
		SELECT count(*) FROM  admin_qna
	</select>
	
	<!-- 페이징처리를 위한 쿼리문  -->
	<select id="select-list-paging" parameterType="map"   resultMap="resultmap-basic-list">
		SELECT 
				<include refid="slect-basic-column"/>
		FROM (
		SELECT  
			<include refid="slect-basic-column"/> ,
				ceil(rownum / #{itemPerPage}) page
		FROM  ADMIN_QNA
		ORDER BY  admin_qna_no DESC
		)WHERE page = #{page}
				
	</select>
	
	<!-- 공지글한개 조회하기 : 세부페이지 보기 -->
	<select id="select-one-detail" parameterType="_int" resultMap="resultmap-basic-list">
		SELECT <include refid="slect-basic-column"/>
		FROM  ADMIN_QNA
		WHERE admin_qna_no = #{no}
	</select>
	
	
	<!-- 공지글 hit ++1 -->
	<update id="update-hit" parameterType="_int">
		UPDATE admin_qna
		SET admin_qna_hit = admin_qna_hit+1
		WHERE admin_qna_no = #{no}
	</update>
	
	<!-- 공지글 삭제 -->
	<delete id="delete-no"  parameterType="_int">
		DELETE FROM admin_qna
		WHERE admin_qna_no = #{no}
	</delete>
	
	<insert id="admin-notice-insert">
		INSERT INTO  
	</insert>
</mapper>